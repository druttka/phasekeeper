(this.webpackJsonpphasekeeper=this.webpackJsonpphasekeeper||[]).push([[0],{12:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var s=a(0),c=(a(12),a(2)),r=a.n(c),n=a(9),o=a.n(n),l=(a(16),a(3)),d=a(7),i=a(1),u=function(e,t){var a=e.players;switch(t.type){case"addPlayer":return Object(i.a)(Object(i.a)({},e),{},{players:[].concat(Object(d.a)(a),[{completedPhase:0,lastCommittedScore:0,stagedScoreAdjustment:0,playerId:a.length,name:t.data.name}])});case"start":return Object(i.a)(Object(i.a)({},e),{},{gameState:"active",hasGameStarted:!0,isRoundInProgress:!0,players:a.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{completedPhase:0,lastCommittedScore:0,stagedScoreAdjustment:0})}))});case"removePlayer":return Object(i.a)(Object(i.a)({},e),{},{players:a.filter((function(e){return e.playerId!==t.data.playerId}))});case"endRound":return Object(i.a)(Object(i.a)({},e),{},{isRoundInProgress:!1});case"adjustPhase":var s=t.data,c=s.adjustment,r=s.playerId,n=a.map((function(e){return e.playerId!==r?e:Object(i.a)(Object(i.a)({},e),{},{completedPhase:e.completedPhase+c})}));return Object(i.a)(Object(i.a)({},e),{},{players:n});case"adjustStagedScoring":var o=t.data,l=o.adjustment,u=o.playerId;return Object(i.a)(Object(i.a)({},e),{},{players:a.map((function(e){return e.playerId===u?Object(i.a)(Object(i.a)({},e),{},{stagedScoreAdjustment:e.stagedScoreAdjustment+l}):e}))});case"discardStagedScoreAdustments":var j=t.data.playerId;return Object(i.a)(Object(i.a)({},e),{},{players:a.map((function(e){return e.playerId===j?Object(i.a)(Object(i.a)({},e),{},{stagedScoreAdjustment:0}):e}))});case"commitScores":var p=a.some((function(e){return e.completedPhase>=10})),h=a.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{lastCommittedScore:e.lastCommittedScore+e.stagedScoreAdjustment,stagedScoreAdjustment:0})}));return p?Object(i.a)(Object(i.a)({},e),{},{gameState:"complete",players:h}):Object(i.a)(Object(i.a)({},e),{},{isRoundInProgress:!0,players:h});case"reset":return{gameState:"init",hasGameStarted:!1,isRoundInProgress:!1,players:a,phasesView:e.phasesView};default:return e}},j={gameState:"init",players:[],hasGameStarted:!1,isRoundInProgress:!1,phasesView:"active"},p=Object(c.createContext)([j,void 0]),h=function(e){var t=e.children,a=Object(c.useReducer)(u,j),r=Object(l.a)(a,2),n=r[0],o=function(e){return{addPlayer:function(t){return e({type:"addPlayer",data:{name:t}})},start:function(){return e({type:"start"})},endRound:function(){return e({type:"endRound"})},adjustPhase:function(t,a){return e({type:"adjustPhase",data:{playerId:t,adjustment:a}})},adjustStagedScoring:function(t,a){return e({type:"adjustStagedScoring",data:{playerId:t,adjustment:a}})},discardStagedScoreAdustments:function(t){return e({type:"discardStagedScoreAdustments",data:{playerId:t}})},commitScores:function(){return e({type:"commitScores"})},reset:function(){return e({type:"reset"})},removePlayer:function(t){return e({type:"removePlayer",data:{playerId:t}})}}}(r[1]);return Object(s.jsx)(p.Provider,{value:[n,o],children:t})},b=function(){var e=Object(c.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,r=t[1],n=a.filter((function(e){return 10===e.completedPhase})).sort((function(e,t){return e.lastCommittedScore-t.lastCommittedScore}))[0];return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h1",{children:["Congratulations ",n.name||"Player ".concat(n.playerId),"!"]}),a.map((function(e){return Object(s.jsxs)("div",{children:[e.name||"Player ".concat(e.playerId)," completed Phase ",e.completedPhase," ","with ",e.lastCommittedScore," points."]})})),Object(s.jsx)("button",{style:{marginTop:10},onClick:function(e){null===r||void 0===r||r.reset()},children:"Play again!"})]})},m=function(){var e=Object(c.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,r=t[1],n=Object(c.useState)(""),o=Object(l.a)(n,2),d=o[0],i=o[1],u=a&&a.length>0;return Object(s.jsxs)("div",{className:"Roster-container",children:[Object(s.jsx)("div",{className:"Roster-heading",children:"Players:"}),u&&Object(s.jsx)("div",{className:"Roster-players",children:a.map((function(e){return Object(s.jsxs)("div",{className:"Roster-player",children:[e.name||e.playerId,Object(s.jsx)("span",{className:"Roster-remove",onClick:function(t){null===r||void 0===r||r.removePlayer(e.playerId)},children:"X"})]},"player-".concat(e.playerId))}))}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",placeholder:"new player",value:d,"aria-label":"Player Name",onChange:function(e){var t;i(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},onKeyPress:function(e){"Enter"===e.key&&(null===r||void 0===r||r.addPlayer(d),i(""))}})})]})},O=function(){var e=Object(c.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,r=t[1],n=a&&a.length>1;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"Game-setup-instruction",children:["Tired of pen and paper? Let Phasekeeper track your game of"," ",Object(s.jsx)("a",{href:"https://www.mattelgames.com/en-us/cards/phase-10",rel:"noreferrer",target:"_blank",children:"Phase 10"}),"!"]}),Object(s.jsx)("div",{className:"Game-setup-instruction",children:"To get started, let's add your players."}),Object(s.jsx)(m,{}),Object(s.jsx)("button",{disabled:!n,onClick:function(e){null===r||void 0===r||r.start()},children:"Let's play!"})]})},y=a(6),g=[{goals:[{goalType:"set",successThreshold:3},{goalType:"set",successThreshold:3}]},{goals:[{goalType:"set",successThreshold:3},{goalType:"run",successThreshold:4}]},{goals:[{goalType:"set",successThreshold:4},{goalType:"run",successThreshold:4}]},{goals:[{goalType:"run",successThreshold:7}]},{goals:[{goalType:"run",successThreshold:8}]},{goals:[{goalType:"run",successThreshold:9}]},{goals:[{goalType:"set",successThreshold:4},{goalType:"set",successThreshold:4}]},{goals:[{goalType:"color-match",successThreshold:7}]},{goals:[{goalType:"set",successThreshold:5},{goalType:"set",successThreshold:2}]},{goals:[{goalType:"set",successThreshold:5},{goalType:"set",successThreshold:3}]}],v=function(e){var t=e.phase,a=e.phaseIndex,c=e.players,r=e.phaseView,n=c&&c.length>0;if("active"===r&&!n)return null;var o=t.goals.reduce((function(e,t){var a="a ".concat(t.goalType," of ").concat(t.successThreshold);return e?e+" and ".concat(a):"".concat(a)}),"");return Object(s.jsxs)("div",{className:"PhaseCard-container",children:[Object(s.jsx)("span",{className:"Phasekeeper-logo no-animate",children:a+1}),Object(s.jsx)("div",{className:"PhaseCard-players",children:c.map((function(e){return Object(s.jsxs)("span",{className:"PhaseCard-player",children:[e.name||"Player ".concat(e.playerId)," (",e.lastCommittedScore,")"]},"PhaseCard-player-".concat(e.playerId))}))}),Object(s.jsx)("div",{className:"PhaseCard-goal",children:o})]})},f=function(){var e=Object(c.useContext)(p),t=Object(l.a)(e,2),a=t[0],r=a.players,n=a.phasesView,o=t[1],u=r.reduce((function(e,t){var a=t.completedPhase,s=[].concat(Object(d.a)(e[a]||[]),[t]);return Object(i.a)(Object(i.a)({},e),{},Object(y.a)({},a,s))}),{}),j=g.map((function(e,t){return Object(s.jsx)(v,{phase:e,phaseIndex:t,phaseView:n,players:u[t]},"phaseCard-".concat(t))}));return Object(s.jsxs)("div",{children:[j,Object(s.jsx)("button",{style:{marginTop:10},className:"action-button",onClick:function(e){null===o||void 0===o||o.endRound()},children:"Next Phase"})]})},x=function(e){var t=e.label,a=e.rangeValue,c=e.setRangeValueCb;return Object(s.jsxs)("div",{className:"ScoreCard-slider",children:[Object(s.jsx)("span",{children:t}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{className:"ScoreCard-range",type:"range",min:"0",max:"10",step:"1",onChange:function(e){c(+e.target.value)},value:a}),Object(s.jsx)("span",{children:a})]})]})},S=function(e){var t=e.player,a=Object(c.useContext)(p),r=Object(l.a)(a,2)[1],n=Object(c.useState)(0),o=Object(l.a)(n,2),d=o[0],i=o[1],u=Object(c.useState)(0),j=Object(l.a)(u,2),h=j[0],b=j[1],m=Object(c.useState)(0),O=Object(l.a)(m,2),y=O[0],g=O[1],v=Object(c.useState)(0),f=Object(l.a)(v,2),S=f[0],C=f[1],P=Object(c.useState)(!1),T=Object(l.a)(P,2),I=T[0],N=T[1];return Object(c.useEffect)((function(){var e=5*d+10*h+25*y+50*S;null===r||void 0===r||r.adjustStagedScoring(t.playerId,e-t.stagedScoreAdjustment)}),[d,h,y,S]),Object(s.jsxs)("div",{className:"ScoreCard-container",children:[Object(s.jsxs)("div",{className:"ScoreCard-player",children:[Object(s.jsx)("span",{children:t.name||"Player ".concat(t.playerId)}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"phase-complete",children:"Completed Phase?"}),Object(s.jsx)("input",{id:"phase-complete",type:"checkbox",checked:I,onChange:function(e){var a=e.target.checked;null===r||void 0===r||r.adjustPhase(t.playerId,a?1:-1),N(a)}})]})]},"ScoreCard-player-".concat(t.playerId)),Object(s.jsx)(x,{label:"Cards 1-9",rangeValue:d,setRangeValueCb:function(e){i(e)}}),Object(s.jsx)(x,{label:"Cards 10-12",rangeValue:h,setRangeValueCb:function(e){b(e)}}),Object(s.jsx)(x,{label:"Skips",rangeValue:y,setRangeValueCb:function(e){g(e)}}),Object(s.jsx)(x,{label:"Wilds",rangeValue:S,setRangeValueCb:function(e){C(e)}}),Object(s.jsxs)("span",{children:["Round score: ",t.stagedScoreAdjustment]})]})},C=function(){var e=Object(c.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,r=t[1];return Object(s.jsxs)("div",{className:"ScoreCards-container",children:[a.map((function(e){return Object(s.jsx)(S,{player:e},"ScoreCard-".concat(e.playerId))})),Object(s.jsx)("button",{style:{marginTop:10},onClick:function(e){return null===r||void 0===r?void 0:r.commitScores()},children:"Continue"})]})},P=function(){var e=Object(c.useContext)(p),t=Object(l.a)(e,1)[0],a=function(){switch(t.gameState){case"init":return Object(s.jsx)(O,{});case"active":return t.isRoundInProgress?Object(s.jsx)(f,{}):Object(s.jsx)(C,{});case"complete":return Object(s.jsx)(b,{})}}();return Object(s.jsx)("div",{className:"Game-view",children:a})};var T=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsxs)("header",{className:"App-header",children:[Object(s.jsx)("div",{className:"Phasekeeper-logo",children:"10"}),Object(s.jsx)("h4",{children:"Phasekeeper"})]}),Object(s.jsx)(h,{children:Object(s.jsx)(P,{})})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,n=t.getTTFB;a(e),s(e),c(e),r(e),n(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(T,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),I()}},[[17,1,2]]]);
//# sourceMappingURL=main.b9374ba6.chunk.js.map