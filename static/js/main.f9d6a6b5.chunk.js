(this.webpackJsonpphasekeeper=this.webpackJsonpphasekeeper||[]).push([[0],{10:function(e,t,a){},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);a(10);var s=a(2),r=a.n(s),c=a(9),n=a.n(c),o=(a(15),a(3)),l=a(7),d=a(1),i=function(e,t){var a=e.players;switch(t.type){case"addPlayer":return Object(d.a)(Object(d.a)({},e),{},{players:[].concat(Object(l.a)(a),[{completedPhase:0,lastCommittedScore:0,stagedScoreAdjustment:0,playerId:a.length,name:t.data.name}])});case"start":return Object(d.a)(Object(d.a)({},e),{},{gameState:"active",hasGameStarted:!0,isRoundInProgress:!0,players:a.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{completedPhase:0,lastCommittedScore:0,stagedScoreAdjustment:0})}))});case"removePlayer":return Object(d.a)(Object(d.a)({},e),{},{players:a.filter((function(e){return e.playerId!==t.data.playerId}))});case"endRound":return Object(d.a)(Object(d.a)({},e),{},{isRoundInProgress:!1});case"adjustPhase":var s=t.data,r=s.adjustment,c=s.playerId,n=a.map((function(e){return e.playerId!==c?e:Object(d.a)(Object(d.a)({},e),{},{completedPhase:e.completedPhase+r})}));return Object(d.a)(Object(d.a)({},e),{},{players:n});case"adjustStagedScoring":var o=t.data,i=o.adjustment,u=o.playerId;return Object(d.a)(Object(d.a)({},e),{},{players:a.map((function(e){return e.playerId===u?Object(d.a)(Object(d.a)({},e),{},{stagedScoreAdjustment:e.stagedScoreAdjustment+i}):e}))});case"discardStagedScoreAdustments":var j=t.data.playerId;return Object(d.a)(Object(d.a)({},e),{},{players:a.map((function(e){return e.playerId===j?Object(d.a)(Object(d.a)({},e),{},{stagedScoreAdjustment:0}):e}))});case"commitScores":var h=a.some((function(e){return e.completedPhase>=10})),p=a.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{lastCommittedScore:e.lastCommittedScore+e.stagedScoreAdjustment,stagedScoreAdjustment:0})}));return h?Object(d.a)(Object(d.a)({},e),{},{gameState:"complete",players:p}):Object(d.a)(Object(d.a)({},e),{},{isRoundInProgress:!0,players:p});case"reset":return{gameState:"init",hasGameStarted:!1,isRoundInProgress:!1,players:a,phasesView:e.phasesView};default:return e}},u=a(0),j={gameState:"init",players:[],hasGameStarted:!1,isRoundInProgress:!1,phasesView:"active"},h=Object(s.createContext)([j,void 0]),p=function(e){var t=e.children,a=e.initialState,r=void 0===a?j:a,c=e.reducer,n=void 0===c?i:c,l=Object(s.useReducer)(n,r),d=Object(o.a)(l,2),p=d[0],b=function(e){return{addPlayer:function(t){return e({type:"addPlayer",data:{name:t}})},start:function(){return e({type:"start"})},endRound:function(){return e({type:"endRound"})},adjustPhase:function(t,a){return e({type:"adjustPhase",data:{playerId:t,adjustment:a}})},adjustStagedScoring:function(t,a){return e({type:"adjustStagedScoring",data:{playerId:t,adjustment:a}})},discardStagedScoreAdustments:function(t){return e({type:"discardStagedScoreAdustments",data:{playerId:t}})},commitScores:function(){return e({type:"commitScores"})},reset:function(){return e({type:"reset"})},removePlayer:function(t){return e({type:"removePlayer",data:{playerId:t}})}}}(d[1]);return Object(u.jsx)(h.Provider,{value:[p,b],children:t})},b=function(){var e=Object(s.useContext)(h),t=Object(o.a)(e,2),a=t[0].players,r=t[1];if(a.length<1)return Object(u.jsx)("div",{"data-testid":"error-view",children:Object(u.jsx)("h1",{children:"Whoops. Looks like we got here without any players... Where'd everybody go?"})});var c=a.sort((function(e,t){return e.completedPhase>t.completedPhase?-1:t.completedPhase>e.completedPhase?1:e.lastCommittedScore-t.lastCommittedScore})),n=c[0];return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h1",{"data-testid":"text-congrats",children:["Congratulations ",n.name||"Player ".concat(n.playerId),"!"]}),c.map((function(e){return Object(u.jsxs)("div",{"data-testid":"text-player-outcome",children:[e.name||"Player ".concat(e.playerId)," completed Phase ",e.completedPhase," ","with ",e.lastCommittedScore," points."]},"player-outcome-".concat(e.playerId))})),Object(u.jsx)("button",{style:{marginTop:10},onClick:function(e){null===r||void 0===r||r.reset()},children:"Play again!"})]})},m=function(){var e=Object(s.useContext)(h),t=Object(o.a)(e,2),a=t[0].players,r=t[1],c=Object(s.useState)(""),n=Object(o.a)(c,2),l=n[0],d=n[1],i=a&&a.length>0;return Object(u.jsxs)("div",{className:"Roster-container",children:[Object(u.jsx)("div",{className:"Roster-heading",children:"Players:"}),i&&Object(u.jsx)("div",{className:"Roster-players",children:a.map((function(e){return Object(u.jsxs)("div",{className:"Roster-player",children:[e.name||e.playerId,Object(u.jsx)("span",{className:"Roster-remove",onClick:function(t){null===r||void 0===r||r.removePlayer(e.playerId)},children:"X"})]},"player-".concat(e.playerId))}))}),Object(u.jsx)("div",{children:Object(u.jsx)("input",{type:"text",placeholder:"new player",value:l,"aria-label":"Player Name",onChange:function(e){var t;d(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},onKeyPress:function(e){"Enter"===e.key&&(null===r||void 0===r||r.addPlayer(l),d(""))}})})]})},O=function(){var e=Object(s.useContext)(h),t=Object(o.a)(e,2),a=t[0].players,r=t[1],c=a&&a.length>1;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"Game-setup-instruction",children:["Tired of pen and paper? Let Phasekeeper track your game of"," ",Object(u.jsx)("a",{href:"https://www.mattelgames.com/en-us/cards/phase-10",rel:"noreferrer",target:"_blank",children:"Phase 10"}),"!"]}),Object(u.jsx)("div",{className:"Game-setup-instruction",children:"To get started, let's add your players."}),Object(u.jsx)(m,{}),Object(u.jsx)("button",{disabled:!c,onClick:function(e){null===r||void 0===r||r.start()},children:"Let's play!"}),Object(u.jsx)("div",{className:"Game-setup-instruction",children:'Wish this site was an app you could use offline? Try "Add to Home Screen"!'}),Object(u.jsxs)("div",{className:"Game-setup-instruction",children:["For more details, see these instructions for"," ",Object(u.jsx)("a",{href:"https://support.google.com/chrome/answer/9658361?hl=en&co=GENIE.Platform%3DAndroid",target:"_blank",rel:"noreferrer",children:"Chrome"}),","," ",Object(u.jsx)("a",{href:"https://www.howtogeek.com/667910/how-to-add-a-website-to-your-iphone-or-ipad-home-screen/",target:"_blank",rel:"noreferrer",children:"Safari"}),", and"," ",Object(u.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Installable_PWAs",target:"_blank",rel:"noreferrer",children:"Firefox"}),"."]})]})},g=a(6),y=[{goals:[{goalType:"set",successThreshold:3},{goalType:"set",successThreshold:3}]},{goals:[{goalType:"set",successThreshold:3},{goalType:"run",successThreshold:4}]},{goals:[{goalType:"set",successThreshold:4},{goalType:"run",successThreshold:4}]},{goals:[{goalType:"run",successThreshold:7}]},{goals:[{goalType:"run",successThreshold:8}]},{goals:[{goalType:"run",successThreshold:9}]},{goals:[{goalType:"set",successThreshold:4},{goalType:"set",successThreshold:4}]},{goals:[{goalType:"color-match",successThreshold:7}]},{goals:[{goalType:"set",successThreshold:5},{goalType:"set",successThreshold:2}]},{goals:[{goalType:"set",successThreshold:5},{goalType:"set",successThreshold:3}]}],v=function(e){var t=e.phase,a=e.phaseIndex,s=e.players,r=e.phaseView,c=s&&s.length>0;if("active"===r&&!c)return null;var n=t.goals.reduce((function(e,t){var a="a ".concat(t.goalType," of ").concat(t.successThreshold);return e?e+" and ".concat(a):"".concat(a)}),"");return Object(u.jsxs)("div",{className:"PhaseCard-container",children:[Object(u.jsx)("span",{className:"RoundInProgress-phase-indicator",children:a+1}),Object(u.jsx)("div",{className:"PhaseCard-players",children:s.map((function(e){return Object(u.jsxs)("span",{className:"PhaseCard-player",children:[e.name||"Player ".concat(e.playerId)," (",e.lastCommittedScore,")"]},"PhaseCard-player-".concat(e.playerId))}))}),Object(u.jsx)("div",{className:"PhaseCard-goal",children:n})]})},f=function(){var e=Object(s.useContext)(h),t=Object(o.a)(e,2),a=t[0],r=a.players,c=a.phasesView,n=t[1],i=r.reduce((function(e,t){var a=t.completedPhase,s=[].concat(Object(l.a)(e[a]||[]),[t]);return Object(d.a)(Object(d.a)({},e),{},Object(g.a)({},a,s))}),{}),j=y.map((function(e,t){return Object(u.jsx)(v,{phase:e,phaseIndex:t,phaseView:c,players:i[t]},"phaseCard-".concat(t))}));return Object(u.jsxs)("div",{children:[j,Object(u.jsx)("button",{style:{marginTop:10},className:"action-button",onClick:function(e){null===n||void 0===n||n.endRound()},children:"Next Phase"})]})},x=function(e){var t=e.label,a=e.rangeValue,s=e.setRangeValueCb;return Object(u.jsxs)("div",{className:"ScoreCard-slider",children:[Object(u.jsx)("span",{children:t}),Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{className:"ScoreCard-range",type:"range",min:"0",max:"10",step:"1",onChange:function(e){s(+e.target.value)},value:a}),Object(u.jsx)("span",{children:a})]})]})},S=function(e){var t=e.player,a=Object(s.useContext)(h),r=Object(o.a)(a,2)[1],c=Object(s.useState)(0),n=Object(o.a)(c,2),l=n[0],d=n[1],i=Object(s.useState)(0),j=Object(o.a)(i,2),p=j[0],b=j[1],m=Object(s.useState)(0),O=Object(o.a)(m,2),g=O[0],y=O[1],v=Object(s.useState)(0),f=Object(o.a)(v,2),S=f[0],P=f[1],C=Object(s.useState)(!1),T=Object(o.a)(C,2),w=T[0],I=T[1],k=t.name,N=t.playerId,R=t.stagedScoreAdjustment;Object(s.useEffect)((function(){var e=5*l+10*p+25*g+50*S;null===r||void 0===r||r.adjustStagedScoring(N,e-R)}),[l,p,g,S]);var A="phase-complete-".concat(N);return Object(u.jsxs)("div",{className:"ScoreCard-container",children:[Object(u.jsxs)("div",{className:"ScoreCard-player",children:[Object(u.jsx)("span",{children:k||"Player ".concat(N)}),Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{htmlFor:A,children:"Completed Phase?"}),Object(u.jsx)("input",{id:A,type:"checkbox",checked:w,onChange:function(e){var t=e.target.checked;null===r||void 0===r||r.adjustPhase(N,t?1:-1),I(t)}})]})]},"ScoreCard-player-".concat(N)),Object(u.jsx)(x,{label:"Cards 1-9",rangeValue:l,setRangeValueCb:function(e){d(e)}}),Object(u.jsx)(x,{label:"Cards 10-12",rangeValue:p,setRangeValueCb:function(e){b(e)}}),Object(u.jsx)(x,{label:"Skips",rangeValue:g,setRangeValueCb:function(e){y(e)}}),Object(u.jsx)(x,{label:"Wilds",rangeValue:S,setRangeValueCb:function(e){P(e)}}),Object(u.jsxs)("span",{children:["Round score: ",R]})]})},P=function(){var e=Object(s.useContext)(h),t=Object(o.a)(e,2),a=t[0].players,r=t[1];return Object(u.jsxs)("div",{className:"ScoreCards-container",children:[a.map((function(e){return Object(u.jsx)(S,{player:e},"ScoreCard-".concat(e.playerId))})),Object(u.jsx)("button",{style:{marginTop:10},onClick:function(e){return null===r||void 0===r?void 0:r.commitScores()},children:"Continue"})]})},C=function(){var e=Object(s.useContext)(h),t=Object(o.a)(e,1)[0],a=function(){switch(t.gameState){case"init":return Object(u.jsx)(O,{});case"active":return t.isRoundInProgress?Object(u.jsx)(f,{}):Object(u.jsx)(P,{});case"complete":return Object(u.jsx)(b,{})}}();return Object(u.jsx)("div",{className:"Game-view",children:a})};var T=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("header",{className:"App-header",children:Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(u.jsx)("img",{className:"Phasekeeper-logo",src:"/logo512-transparent.png",alt:"Phasekeeper logo"}),Object(u.jsx)("h4",{children:"Phasekeeper"})]})}),Object(u.jsx)("div",{className:"App-main",children:Object(u.jsx)(p,{children:Object(u.jsx)(C,{})})}),Object(u.jsxs)("footer",{className:"App-footer",children:[Object(u.jsx)("div",{className:"App-footer-install-hint",children:'Consider using "Add to Home Screen" to install this free application instead of bookmarking the site in your browser!'}),Object(u.jsxs)("div",{className:"App-report-issues-info",children:["To review known issues or report new ones, come see us on"," ",Object(u.jsx)("a",{href:"https://github.com/druttka/phasekeeper/issues",rel:"noreferrer",target:"_blank",children:"GitHub"}),"!"]})]})]})},w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,n=t.getTTFB;a(e),s(e),r(e),c(e),n(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(T,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),w()}},[[17,1,2]]]);
//# sourceMappingURL=main.f9d6a6b5.chunk.js.map