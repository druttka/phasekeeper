(this.webpackJsonpphasekeeper=this.webpackJsonpphasekeeper||[]).push([[0],{12:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var s=a(0),r=(a(12),a(2)),c=a.n(r),n=a(9),o=a.n(n),l=(a(16),a(3)),d=a(7),i=a(1),u=function(e,t){var a=e.players;switch(t.type){case"addPlayer":return Object(i.a)(Object(i.a)({},e),{},{players:[].concat(Object(d.a)(a),[{completedPhase:0,lastCommittedScore:0,stagedScoreAdjustment:0,playerId:a.length,name:t.data.name}])});case"start":return Object(i.a)(Object(i.a)({},e),{},{gameState:"active",hasGameStarted:!0,isRoundInProgress:!0,players:a.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{completedPhase:0,lastCommittedScore:0,stagedScoreAdjustment:0})}))});case"removePlayer":return Object(i.a)(Object(i.a)({},e),{},{players:a.filter((function(e){return e.playerId!==t.data.playerId}))});case"endRound":return Object(i.a)(Object(i.a)({},e),{},{isRoundInProgress:!1});case"adjustPhase":var s=t.data,r=s.adjustment,c=s.playerId,n=a.map((function(e){return e.playerId!==c?e:Object(i.a)(Object(i.a)({},e),{},{completedPhase:e.completedPhase+r})}));return Object(i.a)(Object(i.a)({},e),{},{players:n});case"adjustStagedScoring":var o=t.data,l=o.adjustment,u=o.playerId;return Object(i.a)(Object(i.a)({},e),{},{players:a.map((function(e){return e.playerId===u?Object(i.a)(Object(i.a)({},e),{},{stagedScoreAdjustment:e.stagedScoreAdjustment+l}):e}))});case"discardStagedScoreAdustments":var j=t.data.playerId;return Object(i.a)(Object(i.a)({},e),{},{players:a.map((function(e){return e.playerId===j?Object(i.a)(Object(i.a)({},e),{},{stagedScoreAdjustment:0}):e}))});case"commitScores":var p=a.some((function(e){return e.completedPhase>=10})),h=a.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{lastCommittedScore:e.lastCommittedScore+e.stagedScoreAdjustment,stagedScoreAdjustment:0})}));return p?Object(i.a)(Object(i.a)({},e),{},{gameState:"complete",players:h}):Object(i.a)(Object(i.a)({},e),{},{isRoundInProgress:!0,players:h});case"reset":return{gameState:"init",hasGameStarted:!1,isRoundInProgress:!1,players:a,phasesView:e.phasesView};default:return e}},j={gameState:"init",players:[],hasGameStarted:!1,isRoundInProgress:!1,phasesView:"active"},p=Object(r.createContext)([j,void 0]),h=function(e){var t=e.children,a=Object(r.useReducer)(u,j),c=Object(l.a)(a,2),n=c[0],o=function(e){return{addPlayer:function(t){return e({type:"addPlayer",data:{name:t}})},start:function(){return e({type:"start"})},endRound:function(){return e({type:"endRound"})},adjustPhase:function(t,a){return e({type:"adjustPhase",data:{playerId:t,adjustment:a}})},adjustStagedScoring:function(t,a){return e({type:"adjustStagedScoring",data:{playerId:t,adjustment:a}})},discardStagedScoreAdustments:function(t){return e({type:"discardStagedScoreAdustments",data:{playerId:t}})},commitScores:function(){return e({type:"commitScores"})},reset:function(){return e({type:"reset"})},removePlayer:function(t){return e({type:"removePlayer",data:{playerId:t}})}}}(c[1]);return Object(s.jsx)(p.Provider,{value:[n,o],children:t})},b=function(){var e=Object(r.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,c=t[1],n=a.filter((function(e){return 10===e.completedPhase})).sort((function(e,t){return e.lastCommittedScore-t.lastCommittedScore}))[0];return Object(s.jsxs)("div",{children:[Object(s.jsxs)("h1",{children:["Congratulations ",n.name||"Player ".concat(n.playerId),"!"]}),a.map((function(e){return Object(s.jsxs)("div",{children:[e.name||"Player ".concat(e.playerId)," completed Phase ",e.completedPhase," ","with ",e.lastCommittedScore," points."]})})),Object(s.jsx)("button",{style:{marginTop:10},onClick:function(e){null===c||void 0===c||c.reset()},children:"Play again!"})]})},m=function(){var e=Object(r.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,c=t[1],n=Object(r.useState)(""),o=Object(l.a)(n,2),d=o[0],i=o[1],u=a&&a.length>0;return Object(s.jsxs)("div",{className:"Roster-container",children:[Object(s.jsx)("div",{className:"Roster-heading",children:"Players:"}),u&&Object(s.jsx)("div",{className:"Roster-players",children:a.map((function(e){return Object(s.jsxs)("div",{className:"Roster-player",children:[e.name||e.playerId,Object(s.jsx)("span",{className:"Roster-remove",onClick:function(t){null===c||void 0===c||c.removePlayer(e.playerId)},children:"X"})]},"player-".concat(e.playerId))}))}),Object(s.jsx)("div",{children:Object(s.jsx)("input",{type:"text",placeholder:"new player",value:d,"aria-label":"Player Name",onChange:function(e){var t;i(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},onKeyPress:function(e){"Enter"===e.key&&(null===c||void 0===c||c.addPlayer(d),i(""))}})})]})},O=function(){var e=Object(r.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,c=t[1],n=a&&a.length>1;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"Game-setup-instruction",children:["Tired of pen and paper? Let Phasekeeper track your game of"," ",Object(s.jsx)("a",{href:"https://www.mattelgames.com/en-us/cards/phase-10",rel:"noreferrer",target:"_blank",children:"Phase 10"}),"!"]}),Object(s.jsx)("div",{className:"Game-setup-instruction",children:"To get started, let's add your players."}),Object(s.jsx)(m,{}),Object(s.jsx)("button",{disabled:!n,onClick:function(e){null===c||void 0===c||c.start()},children:"Let's play!"}),Object(s.jsx)("div",{className:"Game-setup-instruction",children:'Wish this site was an app you could use offline? Try "Add to Home Screen"!'}),Object(s.jsxs)("div",{className:"Game-setup-instruction",children:["For more details, see these instructions for"," ",Object(s.jsx)("a",{href:"https://support.google.com/chrome/answer/9658361?hl=en&co=GENIE.Platform%3DAndroid",target:"_blank",rel:"noreferrer",children:"Chrome"}),","," ",Object(s.jsx)("a",{href:"https://www.howtogeek.com/667910/how-to-add-a-website-to-your-iphone-or-ipad-home-screen/",target:"_blank",rel:"noreferrer",children:"Safari"}),", and"," ",Object(s.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps/Installable_PWAs",target:"_blank",rel:"noreferrer",children:"Firefox"}),"."]})]})},g=a(6),y=[{goals:[{goalType:"set",successThreshold:3},{goalType:"set",successThreshold:3}]},{goals:[{goalType:"set",successThreshold:3},{goalType:"run",successThreshold:4}]},{goals:[{goalType:"set",successThreshold:4},{goalType:"run",successThreshold:4}]},{goals:[{goalType:"run",successThreshold:7}]},{goals:[{goalType:"run",successThreshold:8}]},{goals:[{goalType:"run",successThreshold:9}]},{goals:[{goalType:"set",successThreshold:4},{goalType:"set",successThreshold:4}]},{goals:[{goalType:"color-match",successThreshold:7}]},{goals:[{goalType:"set",successThreshold:5},{goalType:"set",successThreshold:2}]},{goals:[{goalType:"set",successThreshold:5},{goalType:"set",successThreshold:3}]}],f=function(e){var t=e.phase,a=e.phaseIndex,r=e.players,c=e.phaseView,n=r&&r.length>0;if("active"===c&&!n)return null;var o=t.goals.reduce((function(e,t){var a="a ".concat(t.goalType," of ").concat(t.successThreshold);return e?e+" and ".concat(a):"".concat(a)}),"");return Object(s.jsxs)("div",{className:"PhaseCard-container",children:[Object(s.jsx)("span",{className:"Phasekeeper-logo no-animate",children:a+1}),Object(s.jsx)("div",{className:"PhaseCard-players",children:r.map((function(e){return Object(s.jsxs)("span",{className:"PhaseCard-player",children:[e.name||"Player ".concat(e.playerId)," (",e.lastCommittedScore,")"]},"PhaseCard-player-".concat(e.playerId))}))}),Object(s.jsx)("div",{className:"PhaseCard-goal",children:o})]})},v=function(){var e=Object(r.useContext)(p),t=Object(l.a)(e,2),a=t[0],c=a.players,n=a.phasesView,o=t[1],u=c.reduce((function(e,t){var a=t.completedPhase,s=[].concat(Object(d.a)(e[a]||[]),[t]);return Object(i.a)(Object(i.a)({},e),{},Object(g.a)({},a,s))}),{}),j=y.map((function(e,t){return Object(s.jsx)(f,{phase:e,phaseIndex:t,phaseView:n,players:u[t]},"phaseCard-".concat(t))}));return Object(s.jsxs)("div",{children:[j,Object(s.jsx)("button",{style:{marginTop:10},className:"action-button",onClick:function(e){null===o||void 0===o||o.endRound()},children:"Next Phase"})]})},x=function(e){var t=e.label,a=e.rangeValue,r=e.setRangeValueCb;return Object(s.jsxs)("div",{className:"ScoreCard-slider",children:[Object(s.jsx)("span",{children:t}),Object(s.jsxs)("div",{children:[Object(s.jsx)("input",{className:"ScoreCard-range",type:"range",min:"0",max:"10",step:"1",onChange:function(e){r(+e.target.value)},value:a}),Object(s.jsx)("span",{children:a})]})]})},S=function(e){var t=e.player,a=Object(r.useContext)(p),c=Object(l.a)(a,2)[1],n=Object(r.useState)(0),o=Object(l.a)(n,2),d=o[0],i=o[1],u=Object(r.useState)(0),j=Object(l.a)(u,2),h=j[0],b=j[1],m=Object(r.useState)(0),O=Object(l.a)(m,2),g=O[0],y=O[1],f=Object(r.useState)(0),v=Object(l.a)(f,2),S=v[0],P=v[1],C=Object(r.useState)(!1),T=Object(l.a)(C,2),I=T[0],w=T[1],N=t.name,k=t.playerId,R=t.stagedScoreAdjustment;Object(r.useEffect)((function(){var e=5*d+10*h+25*g+50*S;null===c||void 0===c||c.adjustStagedScoring(k,e-R)}),[d,h,g,S]);var A="phase-complete-".concat(k);return Object(s.jsxs)("div",{className:"ScoreCard-container",children:[Object(s.jsxs)("div",{className:"ScoreCard-player",children:[Object(s.jsx)("span",{children:N||"Player ".concat(k)}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:A,children:"Completed Phase?"}),Object(s.jsx)("input",{id:A,type:"checkbox",checked:I,onChange:function(e){var t=e.target.checked;null===c||void 0===c||c.adjustPhase(k,t?1:-1),w(t)}})]})]},"ScoreCard-player-".concat(k)),Object(s.jsx)(x,{label:"Cards 1-9",rangeValue:d,setRangeValueCb:function(e){i(e)}}),Object(s.jsx)(x,{label:"Cards 10-12",rangeValue:h,setRangeValueCb:function(e){b(e)}}),Object(s.jsx)(x,{label:"Skips",rangeValue:g,setRangeValueCb:function(e){y(e)}}),Object(s.jsx)(x,{label:"Wilds",rangeValue:S,setRangeValueCb:function(e){P(e)}}),Object(s.jsxs)("span",{children:["Round score: ",R]})]})},P=function(){var e=Object(r.useContext)(p),t=Object(l.a)(e,2),a=t[0].players,c=t[1];return Object(s.jsxs)("div",{className:"ScoreCards-container",children:[a.map((function(e){return Object(s.jsx)(S,{player:e},"ScoreCard-".concat(e.playerId))})),Object(s.jsx)("button",{style:{marginTop:10},onClick:function(e){return null===c||void 0===c?void 0:c.commitScores()},children:"Continue"})]})},C=function(){var e=Object(r.useContext)(p),t=Object(l.a)(e,1)[0],a=function(){switch(t.gameState){case"init":return Object(s.jsx)(O,{});case"active":return t.isRoundInProgress?Object(s.jsx)(v,{}):Object(s.jsx)(P,{});case"complete":return Object(s.jsx)(b,{})}}();return Object(s.jsx)("div",{className:"Game-view",children:a})};var T=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("header",{className:"App-header",children:Object(s.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(s.jsx)("img",{className:"Phasekeeper-logo",src:"/logo512-transparent.png",alt:"Phasekeeper logo"}),Object(s.jsx)("h4",{children:"Phasekeeper"})]})}),Object(s.jsx)("div",{className:"App-main",children:Object(s.jsx)(h,{children:Object(s.jsx)(C,{})})}),Object(s.jsx)("footer",{className:"App-footer",children:Object(s.jsx)("div",{className:"App-footer-install-hint",children:'Consider using "Add to Home Screen" to install this free application instead of bookmarking the site in your browser!'})})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,n=t.getTTFB;a(e),s(e),r(e),c(e),n(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(T,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),I()}},[[17,1,2]]]);
//# sourceMappingURL=main.f20df6d8.chunk.js.map